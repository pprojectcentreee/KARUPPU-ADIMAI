<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KARUPPU ADIMAI - Register</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --black: #0a0a0a; --dark-gray: #141414; --mid-gray: #1e1e1e;
      --gray: #2a2a2a; --light-gray: #3a3a3a; --silver: #c0c0c0;
      --silver-light: #d4d4d4; --white: #e8e8e8; --accent: #888;
      --glow: rgba(192,192,192,0.3);
    }
    html { scroll-behavior: smooth; }
    body { font-family: 'Rajdhani', sans-serif; background: var(--black); color: var(--silver); overflow-x: hidden; min-height: 100vh; }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    a { text-decoration: none; color: inherit; }
    #particleCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }

    /* Nav */
    .main-nav { position: fixed; top: 0; left: 0; width: 100%; padding: 15px 40px; display: flex; justify-content: space-between; align-items: center; z-index: 1000; background: rgba(10,10,10,0.9); backdrop-filter: blur(10px); border-bottom: 1px solid var(--gray); transition: all 0.3s ease; }
    .nav-logo { display: flex; align-items: center; gap: 10px; }
    .logo-icon { font-size: 1.5rem; animation: sparkle 2s infinite; }
    @keyframes sparkle { 0%,100%{opacity:1;transform:scale(1);}50%{opacity:0.6;transform:scale(1.2);} }
    .logo-text { font-family: 'Orbitron', sans-serif; font-size: 1.2rem; font-weight: 700; color: var(--silver-light); letter-spacing: 3px; text-decoration: none; }
    .nav-links { display: flex; gap: 30px; }
    .nav-link { font-family: 'Orbitron', sans-serif; font-size: 0.85rem; color: var(--accent); letter-spacing: 2px; padding: 8px 16px; border: 1px solid transparent; transition: all 0.3s ease; position: relative; }
    .nav-link:hover, .nav-link.active { color: var(--silver-light); border-color: var(--silver); background: rgba(192,192,192,0.05); }
    .nav-link::after { content:''; position:absolute; bottom:-1px; left:50%; width:0; height:1px; background:var(--silver); transition:all 0.3s ease; transform:translateX(-50%); }
    .nav-link:hover::after, .nav-link.active::after { width:80%; }
    .hamburger { display:none; flex-direction:column; gap:5px; cursor:pointer; z-index:1001; }
    .hamburger span { width:25px; height:2px; background:var(--silver); transition:all 0.3s ease; }
    .hamburger.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px);}
    .hamburger.active span:nth-child(2){opacity:0;}
    .hamburger.active span:nth-child(3){transform:rotate(-45deg) translate(5px,-5px);}
    .mobile-menu { display:none; position:fixed; top:60px; left:0; width:100%; background:rgba(10,10,10,0.98); flex-direction:column; padding:20px; z-index:999; border-bottom:1px solid var(--gray); }
    .mobile-menu.active { display:flex; }
    .mobile-link { font-family:'Orbitron',sans-serif; font-size:1rem; color:var(--accent); padding:15px; border-bottom:1px solid var(--gray); letter-spacing:3px; transition:all 0.3s ease; }
    .mobile-link:hover,.mobile-link.active { color:var(--silver-light); background:rgba(192,192,192,0.05); }
    @media(max-width:768px){ .nav-links{display:none;} .hamburger{display:flex;} .main-nav{padding:12px 20px;} }

    /* Glitch */
    .glitch-text { position:relative; }
    .glitch-text::before,.glitch-text::after { content:attr(data-text); position:absolute; top:0; left:0; width:100%; height:100%; }
    .glitch-text::before { color:rgba(192,192,192,0.5); animation:glitch1 3s infinite; clip-path:polygon(0 0,100% 0,100% 45%,0 45%); }
    .glitch-text::after { color:rgba(150,150,150,0.5); animation:glitch2 3s infinite; clip-path:polygon(0 55%,100% 55%,100% 100%,0 100%); }
    @keyframes glitch1{0%,90%,100%{transform:translate(0);}92%{transform:translate(-3px,1px);}94%{transform:translate(3px,-1px);}96%{transform:translate(-2px,2px);}}
    @keyframes glitch2{0%,90%,100%{transform:translate(0);}91%{transform:translate(3px,-1px);}93%{transform:translate(-3px,1px);}95%{transform:translate(2px,-2px);}}

    /* Register */
    .register-section { padding:100px 20px 60px; position:relative; z-index:1; min-height:100vh; }

    /* Warning */
    .warning-container { max-width:800px; margin:0 auto 50px; }
    .electric-spark-border { position:relative; padding:30px; border:2px solid var(--silver); border-radius:15px; background:rgba(20,20,20,0.9); animation:warningPulse 2s ease-in-out infinite; transition:box-shadow 0.15s ease; }
    @keyframes warningPulse { 0%,100%{border-color:var(--gray);box-shadow:none;}50%{border-color:var(--silver);box-shadow:0 0 20px var(--glow),0 0 40px rgba(192,192,192,0.1);} }
    .spark-line { position:absolute; width:30px; height:30px; }
    .spark-line::before,.spark-line::after { content:''; position:absolute; background:var(--silver); }
    .spark-line.top-left{top:-2px;left:-2px;}
    .spark-line.top-left::before{width:30px;height:2px;top:0;left:0;animation:sparkFlash 1s infinite;}
    .spark-line.top-left::after{width:2px;height:30px;top:0;left:0;animation:sparkFlash 1s infinite 0.2s;}
    .spark-line.top-right{top:-2px;right:-2px;}
    .spark-line.top-right::before{width:30px;height:2px;top:0;right:0;animation:sparkFlash 1s infinite 0.3s;}
    .spark-line.top-right::after{width:2px;height:30px;top:0;right:0;animation:sparkFlash 1s infinite 0.5s;}
    .spark-line.bottom-left{bottom:-2px;left:-2px;}
    .spark-line.bottom-left::before{width:30px;height:2px;bottom:0;left:0;animation:sparkFlash 1s infinite 0.4s;}
    .spark-line.bottom-left::after{width:2px;height:30px;bottom:0;left:0;animation:sparkFlash 1s infinite 0.6s;}
    .spark-line.bottom-right{bottom:-2px;right:-2px;}
    .spark-line.bottom-right::before{width:30px;height:2px;bottom:0;right:0;animation:sparkFlash 1s infinite 0.7s;}
    .spark-line.bottom-right::after{width:2px;height:30px;bottom:0;right:0;animation:sparkFlash 1s infinite 0.9s;}
    @keyframes sparkFlash{0%,100%{opacity:0.3;background:var(--gray);}50%{opacity:1;background:#fff;box-shadow:0 0 10px var(--silver);}}
    .warning-content { text-align:center; }
    .warning-icon { font-size:1.5rem; margin:5px 0; animation:iconPulse 1.5s ease-in-out infinite; }
    @keyframes iconPulse{0%,100%{transform:scale(1);}50%{transform:scale(1.1);}}
    .warning-text { font-family:'Rajdhani',sans-serif; font-size:1.1rem; line-height:1.8; margin:15px 0; }
    .highlight { color:#fff; font-weight:700; font-size:1.3rem; text-shadow:0 0 15px rgba(255,255,255,0.3); letter-spacing:1px; background:linear-gradient(90deg,transparent,rgba(192,192,192,0.1),transparent); padding:5px 15px; border-radius:5px; display:inline-block; }

    /* ============================================
       INTRO / TERMS SCREEN
    ============================================ */
    .intro-overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(10,10,10,0.98);
      backdrop-filter: blur(15px);
      z-index: 5000;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.6s ease, visibility 0.6s ease;
    }
    .intro-overlay.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }
    .intro-box {
      max-width: 750px;
      width: 90%;
      position: relative;
      animation: introFadeIn 0.8s ease-out;
    }
    @keyframes introFadeIn {
      from { opacity: 0; transform: translateY(30px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .intro-box .electric-spark-border {
      padding: 40px 30px;
    }
    .intro-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      color: var(--silver-light);
      letter-spacing: 5px;
      margin-bottom: 10px;
      text-align: center;
    }
    .intro-subtitle {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.85rem;
      color: var(--accent);
      letter-spacing: 3px;
      margin-bottom: 25px;
      text-align: center;
    }
    .intro-terms {
      font-family: 'Rajdhani', sans-serif;
      font-size: 1.05rem;
      color: var(--silver);
      line-height: 1.9;
      margin: 20px 0 30px;
      text-align: left;
      padding: 0 10px;
    }
    .intro-terms li {
      margin-bottom: 8px;
      list-style: none;
      padding-left: 25px;
      position: relative;
    }
    .intro-terms li::before {
      content: '‚ö°';
      position: absolute;
      left: 0;
      top: 0;
    }
    .accept-btn {
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem;
      color: var(--black);
      background: linear-gradient(135deg, var(--silver), var(--silver-light));
      border: none;
      padding: 18px 50px;
      border-radius: 50px;
      cursor: pointer;
      letter-spacing: 3px;
      font-weight: 700;
      transition: all 0.3s ease;
      display: block;
      margin: 10px auto 0;
      position: relative;
      overflow: hidden;
    }
    .accept-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(192,192,192,0.4);
    }
    .accept-btn::after {
      content: '';
      position: absolute;
      top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.3) 50%, transparent 60%);
      animation: btnShine 3s infinite;
    }
    @keyframes btnShine {
      0% { transform: translateX(-100%) rotate(45deg); }
      100% { transform: translateX(100%) rotate(45deg); }
    }
    .decline-btn {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.75rem;
      color: var(--accent);
      background: transparent;
      border: 1px solid var(--gray);
      padding: 10px 25px;
      border-radius: 50px;
      cursor: pointer;
      letter-spacing: 2px;
      transition: all 0.3s ease;
      display: block;
      margin: 15px auto 0;
    }
    .decline-btn:hover {
      border-color: #cc6666;
      color: #cc6666;
    }

    /* Form */
    .form-container { max-width:700px; margin:0 auto; background:linear-gradient(145deg,var(--dark-gray),var(--mid-gray)); border:1px solid var(--gray); border-radius:20px; padding:50px 40px; }
    .form-header { text-align:center; margin-bottom:40px; }
    .form-title { font-family:'Orbitron',sans-serif; font-size:2.5rem; color:var(--silver-light); letter-spacing:8px; margin-bottom:10px; }
    .form-subtitle { font-family:'Rajdhani',sans-serif; font-size:1rem; color:var(--accent); letter-spacing:2px; }
    .form-group { margin-bottom:35px; }
    .form-label { display:flex; align-items:center; gap:10px; font-family:'Orbitron',sans-serif; font-size:0.85rem; color:var(--silver); letter-spacing:2px; margin-bottom:12px; }
    .label-icon { font-size:1.2rem; }
    .sub-label { margin-top:15px; font-size:0.75rem; }
    .input-container { position:relative; }
    .form-input,.form-textarea { width:100%; padding:15px 20px; background:rgba(0,0,0,0.4); border:1px solid var(--light-gray); border-radius:10px; color:var(--silver-light); font-family:'Rajdhani',sans-serif; font-size:1.05rem; letter-spacing:1px; transition:all 0.3s ease; outline:none; }
    .form-input:focus,.form-textarea:focus { border-color:var(--silver); background:rgba(0,0,0,0.6); box-shadow:0 0 15px var(--glow); }
    .form-input::placeholder,.form-textarea::placeholder { color:var(--light-gray); }
    .form-textarea { resize:vertical; min-height:80px; }
    .input-line { position:absolute; bottom:0; left:50%; width:0; height:2px; background:var(--silver); transition:all 0.3s ease; transform:translateX(-50%); }
    .form-input:focus~.input-line,.form-textarea:focus~.input-line { width:100%; }

    /* Checkboxes */
    .checkbox-group { display:flex; flex-direction:column; gap:12px; }
    .checkbox-container { display:flex; align-items:center; gap:12px; padding:12px 18px; background:rgba(0,0,0,0.3); border:1px solid var(--gray); border-radius:10px; cursor:pointer; transition:all 0.3s ease; }
    .checkbox-container:hover { border-color:var(--silver); background:rgba(192,192,192,0.05); }
    .checkbox-container input[type="checkbox"] { display:none; }
    .checkmark { width:22px; height:22px; border:2px solid var(--light-gray); border-radius:5px; position:relative; transition:all 0.3s ease; flex-shrink:0; }
    .checkbox-container input:checked~.checkmark { background:var(--silver); border-color:var(--silver); }
    .checkmark::after { content:'‚úì'; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) scale(0); color:var(--black); font-size:14px; font-weight:bold; transition:all 0.3s ease; }
    .checkbox-container input:checked~.checkmark::after { transform:translate(-50%,-50%) scale(1); }
    .checkbox-text { font-family:'Rajdhani',sans-serif; font-size:1.05rem; color:var(--silver); letter-spacing:1px; }
    .custom-interest-container.slide-in { animation:slideIn 0.4s ease-out; }
    @keyframes slideIn{from{opacity:0;transform:translateY(-10px);}to{opacity:1;transform:translateY(0);}}

    /* Radio */
    .radio-group { display:flex; gap:20px; flex-wrap:wrap; }
    .radio-container { display:flex; align-items:center; gap:12px; padding:15px 25px; background:rgba(0,0,0,0.3); border:1px solid var(--gray); border-radius:10px; cursor:pointer; transition:all 0.3s ease; flex:1; min-width:180px; }
    .radio-container:hover { border-color:var(--silver); background:rgba(192,192,192,0.05); }
    .radio-container input[type="radio"] { display:none; }
    .radio-mark { width:22px; height:22px; border:2px solid var(--light-gray); border-radius:50%; position:relative; transition:all 0.3s ease; flex-shrink:0; }
    .radio-container input:checked~.radio-mark { border-color:var(--silver); }
    .radio-mark::after { content:''; position:absolute; top:50%; left:50%; width:10px; height:10px; background:var(--silver); border-radius:50%; transform:translate(-50%,-50%) scale(0); transition:all 0.3s ease; }
    .radio-container input:checked~.radio-mark::after { transform:translate(-50%,-50%) scale(1); }
    .radio-text { font-family:'Rajdhani',sans-serif; font-size:1.1rem; color:var(--silver); letter-spacing:1px; }

    /* Submit */
    .submit-group { text-align:center; margin-top:40px; }
    .submit-button { font-family:'Orbitron',sans-serif; font-size:1rem; color:var(--black); background:linear-gradient(135deg,var(--silver),var(--silver-light)); border:none; padding:18px 50px; border-radius:50px; cursor:pointer; letter-spacing:3px; font-weight:700; transition:all 0.3s ease; display:inline-flex; align-items:center; gap:10px; }
    .submit-button:hover { transform:translateY(-3px); box-shadow:0 10px 30px rgba(192,192,192,0.3); }
    .submit-button:disabled { opacity:0.7; cursor:not-allowed; transform:none; }
    .btn-loading { display:flex; align-items:center; gap:10px; }
    .spinner { width:20px; height:20px; border:3px solid rgba(0,0,0,0.2); border-top-color:var(--black); border-radius:50%; animation:spin 0.8s linear infinite; }
    @keyframes spin{to{transform:rotate(360deg);}}

    /* Messages */
    .success-message,.error-message { text-align:center; padding:40px; animation:fadeInUp 0.5s ease-out; }
    @keyframes fadeInUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    .success-icon,.error-icon { font-size:4rem; margin-bottom:20px; }
    .success-message h3 { font-family:'Orbitron',sans-serif; font-size:1.5rem; color:var(--silver-light); letter-spacing:3px; margin-bottom:10px; }
    .success-message p,.error-message p { font-family:'Rajdhani',sans-serif; font-size:1.1rem; color:var(--accent); margin-bottom:25px; }
    .error-message h3 { font-family:'Orbitron',sans-serif; font-size:1.5rem; color:#cc6666; letter-spacing:3px; margin-bottom:10px; }
    .reset-button { font-family:'Orbitron',sans-serif; font-size:0.85rem; color:var(--silver); background:transparent; border:1px solid var(--silver); padding:12px 30px; border-radius:50px; cursor:pointer; letter-spacing:2px; transition:all 0.3s ease; }
    .reset-button:hover { background:var(--silver); color:var(--black); }

    /* Admin Panel Styles */
    .admin-trigger { position:fixed; bottom:20px; right:20px; width:50px; height:50px; background:var(--gray); border:1px solid var(--light-gray); border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:1001; font-size:1.2rem; transition:all 0.3s ease; opacity:0.3; }
    .admin-trigger:hover { opacity:1; border-color:var(--silver); background:var(--mid-gray); box-shadow:0 0 15px var(--glow); transform:scale(1.1); }

    .modal-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); backdrop-filter:blur(5px); z-index:2000; justify-content:center; align-items:center; }
    .modal-overlay.active { display:flex; }
    .password-modal { background:linear-gradient(145deg,var(--dark-gray),var(--mid-gray)); border:1px solid var(--gray); border-radius:20px; padding:40px; width:90%; max-width:420px; text-align:center; animation:modalSlideIn 0.4s ease-out; position:relative; }
    @keyframes modalSlideIn { from{opacity:0;transform:translateY(-30px) scale(0.95);} to{opacity:1;transform:translateY(0) scale(1);} }
    .modal-close { position:absolute; top:15px; right:20px; background:none; border:none; color:var(--accent); font-size:1.5rem; cursor:pointer; transition:all 0.3s ease; }
    .modal-close:hover { color:#cc6666; transform:scale(1.2); }
    .modal-icon { font-size:3rem; margin-bottom:15px; animation:lockPulse 2s ease-in-out infinite; }
    @keyframes lockPulse { 0%,100%{transform:scale(1);}50%{transform:scale(1.05);} }
    .modal-title { font-family:'Orbitron',sans-serif; font-size:1.3rem; color:var(--silver-light); letter-spacing:3px; margin-bottom:8px; }
    .modal-subtitle { font-family:'Rajdhani',sans-serif; font-size:0.9rem; color:var(--accent); margin-bottom:25px; }
    .password-input-group { position:relative; margin-bottom:20px; }
    .password-input { width:100%; padding:15px 50px 15px 20px; background:rgba(0,0,0,0.5); border:1px solid var(--light-gray); border-radius:10px; color:var(--silver-light); font-family:'Rajdhani',sans-serif; font-size:1.1rem; letter-spacing:3px; text-align:center; outline:none; transition:all 0.3s ease; }
    .password-input:focus { border-color:var(--silver); box-shadow:0 0 15px var(--glow); }
    .password-input::placeholder { color:var(--light-gray); letter-spacing:2px; }
    .toggle-password { position:absolute; right:15px; top:50%; transform:translateY(-50%); background:none; border:none; color:var(--accent); font-size:1.2rem; cursor:pointer; transition:all 0.3s ease; }
    .toggle-password:hover { color:var(--silver); }
    .password-error { font-family:'Rajdhani',sans-serif; font-size:0.9rem; color:#cc6666; margin-bottom:15px; min-height:20px; animation:shake 0.5s ease; }
    @keyframes shake { 0%,100%{transform:translateX(0);}25%{transform:translateX(-8px);}50%{transform:translateX(8px);}75%{transform:translateX(-5px);} }
    .password-attempts { font-family:'Orbitron',sans-serif; font-size:0.7rem; color:var(--light-gray); margin-top:10px; letter-spacing:1px; }
    .login-button { font-family:'Orbitron',sans-serif; font-size:0.9rem; color:var(--black); background:linear-gradient(135deg,var(--silver),var(--silver-light)); border:none; padding:14px 40px; border-radius:50px; cursor:pointer; letter-spacing:3px; font-weight:700; transition:all 0.3s ease; width:100%; }
    .login-button:hover { transform:translateY(-2px); box-shadow:0 8px 25px rgba(192,192,192,0.3); }
    .login-button:disabled { opacity:0.5; cursor:not-allowed; transform:none; }
    .lockout-message { font-family:'Rajdhani',sans-serif; font-size:1rem; color:#cc6666; padding:20px; }

    /* Admin Panel */
    .admin-panel { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(10,10,10,0.98); backdrop-filter:blur(10px); z-index:3000; overflow-y:auto; animation:panelSlideIn 0.5s ease-out; }
    .admin-panel.active { display:block; }
    @keyframes panelSlideIn { from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);} }
    .admin-header { display:flex; justify-content:space-between; align-items:center; padding:20px 40px; border-bottom:1px solid var(--gray); background:rgba(10,10,10,0.95); position:sticky; top:0; z-index:10; flex-wrap:wrap; gap:15px; }
    .admin-title { font-family:'Orbitron',sans-serif; font-size:1.3rem; color:var(--silver-light); letter-spacing:3px; display:flex; align-items:center; gap:10px; }
    .admin-badge { font-family:'Orbitron',sans-serif; font-size:0.6rem; color:#4CAF50; border:1px solid #4CAF50; padding:3px 10px; border-radius:20px; letter-spacing:2px; animation:badgePulse 2s ease-in-out infinite; }
    @keyframes badgePulse { 0%,100%{opacity:0.7;}50%{opacity:1;box-shadow:0 0 10px rgba(76,175,80,0.3);} }
    .admin-controls { display:flex; gap:10px; flex-wrap:wrap; }
    .admin-btn { font-family:'Orbitron',sans-serif; font-size:0.7rem; color:var(--silver); background:transparent; border:1px solid var(--light-gray); padding:10px 18px; border-radius:8px; cursor:pointer; letter-spacing:1px; transition:all 0.3s ease; display:flex; align-items:center; gap:6px; }
    .admin-btn:hover { border-color:var(--silver); background:rgba(192,192,192,0.1); transform:translateY(-1px); }
    .admin-btn.danger { border-color:rgba(204,102,102,0.3); }
    .admin-btn.danger:hover { border-color:#cc6666; color:#cc6666; background:rgba(204,102,102,0.1); }
    .admin-btn.logout { border-color:rgba(255,165,0,0.3); }
    .admin-btn.logout:hover { border-color:#ffa500; color:#ffa500; background:rgba(255,165,0,0.1); }
    .admin-body { padding:30px 40px; }

    /* Stats */
    .stats-row { display:flex; gap:20px; margin-bottom:30px; flex-wrap:wrap; }
    .stat-card { flex:1; min-width:150px; background:linear-gradient(145deg,var(--dark-gray),var(--mid-gray)); border:1px solid var(--gray); border-radius:12px; padding:20px; text-align:center; transition:all 0.3s ease; }
    .stat-card:hover { border-color:var(--silver); transform:translateY(-2px); }
    .stat-number { font-family:'Orbitron',sans-serif; font-size:2rem; color:var(--silver-light); font-weight:900; }
    .stat-label { font-family:'Orbitron',sans-serif; font-size:0.6rem; color:var(--accent); letter-spacing:2px; margin-top:5px; }

    /* Search */
    .search-container { margin-bottom:20px; }
    .search-input { width:100%; max-width:400px; padding:12px 20px; background:rgba(0,0,0,0.4); border:1px solid var(--light-gray); border-radius:10px; color:var(--silver-light); font-family:'Rajdhani',sans-serif; font-size:1rem; outline:none; transition:all 0.3s ease; }
    .search-input:focus { border-color:var(--silver); box-shadow:0 0 15px var(--glow); }
    .search-input::placeholder { color:var(--light-gray); }

    /* Data Table */
    .data-table-container { background:linear-gradient(145deg,var(--dark-gray),var(--mid-gray)); border:1px solid var(--gray); border-radius:15px; overflow-x:auto; }
    .data-table { width:100%; border-collapse:collapse; min-width:900px; }
    .data-table th { font-family:'Orbitron',sans-serif; font-size:0.7rem; color:var(--silver-light); letter-spacing:2px; padding:15px; text-align:left; background:rgba(0,0,0,0.3); border-bottom:1px solid var(--gray); position:sticky; top:0; }
    .data-table td { font-family:'Rajdhani',sans-serif; font-size:0.95rem; color:var(--accent); padding:12px 15px; border-bottom:1px solid rgba(42,42,42,0.5); }
    .data-table tr:hover td { background:rgba(192,192,192,0.03); color:var(--silver-light); }
    .data-table .no-data { text-align:center; padding:40px; color:var(--light-gray); font-style:italic; }
    .delete-row-btn { background:none; border:none; color:var(--light-gray); cursor:pointer; font-size:1rem; transition:all 0.2s ease; padding:5px; }
    .delete-row-btn:hover { color:#cc6666; transform:scale(1.2); }

    /* Session Timer */
    .session-timer { font-family:'Orbitron',sans-serif; font-size:0.65rem; color:var(--accent); letter-spacing:1px; }
    .session-timer.warning { color:#ffa500; }
    .session-timer.critical { color:#cc6666; animation:blink 0.5s infinite; }
    @keyframes blink { 0%,100%{opacity:1;}50%{opacity:0.3;} }

    /* Footer */
    .main-footer { position:relative; z-index:1; padding:30px; border-top:1px solid var(--gray); text-align:center; background:rgba(10,10,10,0.9); margin-top:50px; }
    .footer-content p { font-family:'Rajdhani',sans-serif; font-size:0.9rem; color:var(--accent); letter-spacing:1px; }

    /* Scrollbar */
    ::-webkit-scrollbar{width:8px;}::-webkit-scrollbar-track{background:var(--black);}
    ::-webkit-scrollbar-thumb{background:var(--light-gray);border-radius:4px;}
    ::-webkit-scrollbar-thumb:hover{background:var(--silver);}
    ::selection{background:rgba(192,192,192,0.3);color:#fff;}

    @media(max-width:768px){
      .form-container{padding:30px 20px;} .form-title{font-size:1.8rem;letter-spacing:5px;}
      .radio-group{flex-direction:column;} .highlight{font-size:1.1rem;}
      .electric-spark-border{padding:20px;}
      .admin-header{padding:15px 20px;}
      .admin-body{padding:20px;}
      .admin-title{font-size:1rem;}
      .data-table th,.data-table td{padding:10px 8px;font-size:0.8rem;}
      .intro-title{font-size:1.4rem;letter-spacing:3px;}
    }
    @media(max-width:480px){
      .submit-button{padding:15px 30px;font-size:0.85rem;}
      .form-title{font-size:1.5rem;letter-spacing:3px;}
      .stats-row{flex-direction:column;}
      .admin-controls{width:100%;justify-content:center;}
      .intro-title{font-size:1.2rem;letter-spacing:2px;}
    }
  </style>
</head>
<body class="register-page">

  <canvas id="particleCanvas"></canvas>

  <!-- ============================================
       INTRO / TERMS OVERLAY
  ============================================ -->
  <div class="intro-overlay" id="introOverlay">
    <div class="intro-box">
      <div class="electric-spark-border">
        <div class="spark-line top-left"></div>
        <div class="spark-line top-right"></div>
        <div class="spark-line bottom-left"></div>
        <div class="spark-line bottom-right"></div>
        <div class="warning-content">
          <div class="warning-icon">‚ö° ‚ö° ‚ö°</div>
          <h1 class="intro-title glitch-text" data-text="KARUPPU ADIMAI">KARUPPU ADIMAI</h1>
          <p class="intro-subtitle">KNOWLEDGE SHARING COMMUNITY</p>
          <p class="warning-text">
            <span class="highlight">*Take this As Serious. It's truly not for fun, please, and purely to share knowledge*</span>
          </p>
          <ul class="intro-terms">
            <li>This community is strictly for <strong style="color:#fff;">educational purposes</strong> and knowledge sharing only.</li>
            <li>All information you provide will be kept <strong style="color:#fff;">confidential</strong> and used solely for community management.</li>
            <li>By registering, you agree to participate with <strong style="color:#fff;">sincerity and respect</strong>.</li>
            <li>Any misuse of shared knowledge is <strong style="color:#fff;">strictly prohibited</strong>.</li>
            <li>You confirm that you are joining to <strong style="color:#fff;">learn, grow, and contribute</strong> positively.</li>
          </ul>
          <div class="warning-icon">‚ö° ‚ö° ‚ö°</div>
          <button class="accept-btn" onclick="acceptTerms()">
            ‚ö° I ACCEPT THESE TERMS ‚ö°
          </button>
          <button class="decline-btn" onclick="declineTerms()">
            I DECLINE
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Nav -->
  <nav class="main-nav">
    <div class="nav-logo">
      <span class="logo-icon">‚ö°</span>
      <a href="index.html" class="logo-text">KARUPPU ADIMAI</a>
    </div>
    <div class="nav-links">
      <a href="index.html" class="nav-link">HOME</a>
      <a href="about.html" class="nav-link">ABOUT</a>
      <a href="register.html" class="nav-link active">REGISTER</a>
    </div>
    <div class="hamburger" id="hamburger">
      <span></span><span></span><span></span>
    </div>
  </nav>

  <div class="mobile-menu" id="mobileMenu">
    <a href="index.html" class="mobile-link">HOME</a>
    <a href="about.html" class="mobile-link">ABOUT</a>
    <a href="register.html" class="mobile-link active">REGISTER</a>
  </div>

  <!-- ============================================
       REGISTRATION FORM (HIDDEN UNTIL TERMS ACCEPTED)
  ============================================ -->
  <section class="register-section" id="registerSection" style="display:none;">
    <div class="container">

      <!-- Warning -->
      <div class="warning-container">
        <div class="electric-spark-border">
          <div class="spark-line top-left"></div>
          <div class="spark-line top-right"></div>
          <div class="spark-line bottom-left"></div>
          <div class="spark-line bottom-right"></div>
          <div class="warning-content">
            <div class="warning-icon">‚ö° ‚ö° ‚ö°</div>
            <p class="warning-text">
              <span class="highlight">*Take this As Serious. It's truly not for fun, please, and purely to share knowledge*</span>
            </p>
            <div class="warning-icon">‚ö° ‚ö° ‚ö°</div>
          </div>
        </div>
      </div>

      <!-- Form -->
      <div class="form-container">
        <div class="form-header">
          <h1 class="form-title glitch-text" data-text="REGISTER">REGISTER</h1>
          <p class="form-subtitle">Fill in your details to join KARUPPU ADIMAI</p>
        </div>

        <form id="registrationForm" onsubmit="submitForm(event)">

          <!-- Name -->
          <div class="form-group">
            <label for="name" class="form-label"><span class="label-icon">üë§</span> YOUR NAME</label>
            <div class="input-container">
              <input type="text" id="name" name="name" class="form-input" placeholder="Enter your full name" required autocomplete="name">
              <div class="input-line"></div>
            </div>
          </div>

          <!-- WhatsApp Number -->
          <div class="form-group">
            <label for="whatsapp" class="form-label"><span class="label-icon">üì±</span> WHATSAPP NUMBER</label>
            <div class="input-container">
              <input type="tel" id="whatsapp" name="whatsapp" class="form-input" placeholder="Enter your WhatsApp number (e.g., +91 98765 43210)" required autocomplete="tel">
              <div class="input-line"></div>
            </div>
          </div>

          <!-- Email -->
          <div class="form-group">
            <label for="email" class="form-label"><span class="label-icon">üìß</span> EMAIL ADDRESS</label>
            <div class="input-container">
              <input type="email" id="email" name="email" class="form-input" placeholder="Enter your email address" required autocomplete="email">
              <div class="input-line"></div>
            </div>
          </div>

          <!-- Interests -->
          <div class="form-group">
            <label class="form-label"><span class="label-icon">üéØ</span> YOUR INTERESTS</label>
            <div class="checkbox-group">
              <label class="checkbox-container">
                <input type="checkbox" name="interests" value="Full Stack" onchange="handleInterestChange()">
                <span class="checkmark"></span><span class="checkbox-text">Full Stack Development</span>
              </label>
              <label class="checkbox-container">
                <input type="checkbox" name="interests" value="Embedded Systems" onchange="handleInterestChange()">
                <span class="checkmark"></span><span class="checkbox-text">Embedded Systems</span>
              </label>
              <label class="checkbox-container">
                <input type="checkbox" name="interests" value="IoT" onchange="handleInterestChange()">
                <span class="checkmark"></span><span class="checkbox-text">IoT (Internet of Things)</span>
              </label>
              <label class="checkbox-container">
                <input type="checkbox" name="interests" value="PCB Design" onchange="handleInterestChange()">
                <span class="checkmark"></span><span class="checkbox-text">PCB Design</span>
              </label>
              <label class="checkbox-container">
                <input type="checkbox" name="interests" value="None of the Above" id="noneCheckbox" onchange="handleNoneChange()">
                <span class="checkmark"></span><span class="checkbox-text">None of the Above</span>
              </label>
            </div>
            <div class="custom-interest-container" id="customInterestBox" style="display:none;">
              <label for="customInterest" class="form-label sub-label"><span class="label-icon">‚úçÔ∏è</span> Tell us your interests:</label>
              <div class="input-container">
                <textarea id="customInterest" name="customInterest" class="form-textarea" placeholder="Describe your interests here..." rows="3"></textarea>
                <div class="input-line"></div>
              </div>
            </div>
          </div>

          <!-- Accommodation -->
          <div class="form-group">
            <label class="form-label"><span class="label-icon">üè†</span> ACCOMMODATION TYPE</label>
            <div class="radio-group">
              <label class="radio-container">
                <input type="radio" name="accommodation" value="Day Scholar" required>
                <span class="radio-mark"></span><span class="radio-text">Day Scholar</span>
              </label>
              <label class="radio-container">
                <input type="radio" name="accommodation" value="Hosteler">
                <span class="radio-mark"></span><span class="radio-text">Hosteler</span>
              </label>
            </div>
          </div>

          <!-- Submit -->
          <div class="form-group submit-group">
            <button type="submit" class="submit-button" id="submitBtn">
              <span class="btn-text">SUBMIT REGISTRATION</span>
              <span class="btn-icon">‚ö°</span>
              <div class="btn-loading" id="btnLoading" style="display:none;">
                <div class="spinner"></div><span>SUBMITTING...</span>
              </div>
            </button>
          </div>
        </form>

        <div class="success-message" id="successMessage" style="display:none;">
          <div class="success-icon">‚úÖ</div>
          <h3>REGISTRATION SUCCESSFUL!</h3>
          <p>Welcome to KARUPPU ADIMAI. Your data has been recorded.</p>
          <button onclick="resetForm()" class="reset-button">Register Another</button>
        </div>

        <div class="error-message" id="errorMessage" style="display:none;">
          <div class="error-icon">‚ùå</div>
          <h3>SUBMISSION FAILED</h3>
          <p id="errorText">Something went wrong. Please try again.</p>
          <button onclick="hideError()" class="reset-button">Try Again</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Admin Trigger -->
  <div class="admin-trigger" id="adminTrigger" onclick="openPasswordModal()" title="Admin Panel">üîí</div>

  <!-- Password Modal -->
  <div class="modal-overlay" id="passwordModal">
    <div class="password-modal">
      <button class="modal-close" onclick="closePasswordModal()">‚úï</button>
      <div class="modal-icon">üîê</div>
      <h2 class="modal-title">ADMIN ACCESS</h2>
      <p class="modal-subtitle">Enter password to view registrations</p>
      <div id="loginForm">
        <div class="password-input-group">
          <input type="password" id="adminPassword" class="password-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeypress="if(event.key==='Enter')verifyPassword();" autocomplete="off">
          <button class="toggle-password" onclick="togglePasswordVisibility()" type="button" id="toggleBtn">üëÅÔ∏è</button>
        </div>
        <div class="password-error" id="passwordError"></div>
        <button class="login-button" id="loginBtn" onclick="verifyPassword()">UNLOCK ‚ö°</button>
        <p class="password-attempts" id="attemptsText"></p>
      </div>
      <div id="lockoutView" style="display:none;">
        <div class="lockout-message">
          <p>üö´ TOO MANY FAILED ATTEMPTS</p>
          <p>Try again in <span id="lockoutTimer">60</span> seconds</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin Panel -->
  <div class="admin-panel" id="adminPanel">
    <div class="admin-header">
      <div class="admin-title">
        üõ°Ô∏è ADMIN PANEL
        <span class="admin-badge">AUTHENTICATED</span>
      </div>
      <span class="session-timer" id="sessionTimer">SESSION: 10:00</span>
      <div class="admin-controls">
        <button class="admin-btn" onclick="downloadCSV()">üì• CSV</button>
        <button class="admin-btn" onclick="downloadJSON()">üì• JSON</button>
        <button class="admin-btn danger" onclick="clearAllData()">üóëÔ∏è CLEAR ALL</button>
        <button class="admin-btn logout" onclick="logoutAdmin()">üö™ LOGOUT</button>
      </div>
    </div>
    <div class="admin-body">
      <!-- Stats -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-number" id="statTotal">0</div>
          <div class="stat-label">TOTAL</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="statDay">0</div>
          <div class="stat-label">DAY SCHOLARS</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="statHostel">0</div>
          <div class="stat-label">HOSTELERS</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="statToday">0</div>
          <div class="stat-label">TODAY</div>
        </div>
      </div>

      <!-- Search -->
      <div class="search-container">
        <input type="text" class="search-input" id="searchInput" placeholder="üîç Search by name, email, WhatsApp..." oninput="renderAdminTable()">
      </div>

      <!-- Table -->
      <div class="data-table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>#</th>
              <th>NAME</th>
              <th>WHATSAPP</th>
              <th>EMAIL</th>
              <th>INTERESTS</th>
              <th>TYPE</th>
              <th>TIMESTAMP</th>
              <th>DEL</th>
            </tr>
          </thead>
          <tbody id="adminTableBody">
            <tr><td colspan="8" class="no-data">No registrations yet</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="main-footer">
    <div class="footer-content">
      <p>¬© 2025 KARUPPU ADIMAI | Built with ‚ö° for Knowledge Sharing</p>
    </div>
  </footer>

  <script>
    // ============================================
    // CONFIGURATION
    // ============================================
    const ADMIN_CONFIG = {
      password: 'Greatis here',
      maxAttempts: 5,
      lockoutTime: 60,
      sessionTimeout: 10
    };

    const DB_KEY = 'karuppu_adimai_registrations';
    const ATTEMPTS_KEY = 'karuppu_admin_attempts';
    const LOCKOUT_KEY = 'karuppu_admin_lockout';
    const TERMS_KEY = 'karuppu_terms_accepted';

    let sessionInterval = null;
    let sessionRemaining = ADMIN_CONFIG.sessionTimeout * 60;

    // ============================================
    // INTRO / TERMS ACCEPTANCE
    // ============================================
    function acceptTerms() {
      const overlay = document.getElementById('introOverlay');
      overlay.classList.add('hidden');
      document.getElementById('registerSection').style.display = 'block';
      sessionStorage.setItem(TERMS_KEY, 'true');
    }

    function declineTerms() {
      if (confirm('You must accept the terms to register. Are you sure you want to leave?')) {
        window.location.href = 'index.html';
      }
    }

    // Check if terms already accepted in this session
    (function checkTerms() {
      if (sessionStorage.getItem(TERMS_KEY) === 'true') {
        document.getElementById('introOverlay').classList.add('hidden');
        document.getElementById('registerSection').style.display = 'block';
      }
    })();

    // ============================================
    // HAMBURGER
    // ============================================
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    if (hamburger) {
      hamburger.addEventListener('click', function() {
        hamburger.classList.toggle('active');
        mobileMenu.classList.toggle('active');
      });
    }

    // ============================================
    // PARTICLES
    // ============================================
    const canvas = document.getElementById('particleCanvas');
    if (canvas) {
      const ctx = canvas.getContext('2d');
      let particles = [];
      function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
      resize();
      window.addEventListener('resize', resize);
      class P {
        constructor() { this.reset(); }
        reset() {
          this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height;
          this.s = Math.random() * 2 + 0.5; this.sx = (Math.random() - 0.5) * 0.5;
          this.sy = (Math.random() - 0.5) * 0.5; this.o = Math.random() * 0.5 + 0.1;
          this.fs = Math.random() * 0.005 + 0.002; this.g = Math.random() > 0.5;
        }
        update() {
          this.x += this.sx; this.y += this.sy;
          if (this.g) { this.o += this.fs; if (this.o >= 0.6) this.g = false; }
          else { this.o -= this.fs; if (this.o <= 0.05) this.g = true; }
          if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) this.reset();
        }
        draw() {
          ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(192,192,192,${this.o})`; ctx.fill();
        }
      }
      for (let i = 0; i < 60; i++) particles.push(new P());
      function drawC() {
        for (let i = 0; i < particles.length; i++)
          for (let j = i + 1; j < particles.length; j++) {
            let dx = particles[i].x - particles[j].x, dy = particles[i].y - particles[j].y,
              d = Math.sqrt(dx * dx + dy * dy);
            if (d < 150) {
              ctx.beginPath(); ctx.strokeStyle = `rgba(192,192,192,${(1 - d / 150) * 0.15})`;
              ctx.lineWidth = 0.5; ctx.moveTo(particles[i].x, particles[i].y);
              ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
            }
          }
      }
      function anim() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(function(p) { p.update(); p.draw(); });
        drawC(); requestAnimationFrame(anim);
      }
      anim();
    }

    // ============================================
    // SPARK & NAV
    // ============================================
    const warnBoxes = document.querySelectorAll('.electric-spark-border');
    warnBoxes.forEach(function(warnBox) {
      setInterval(function() {
        warnBox.style.boxShadow = '0 0 30px rgba(192,192,192,0.4),inset 0 0 20px rgba(192,192,192,0.1)';
        setTimeout(function() { warnBox.style.boxShadow = 'none'; }, 150);
      }, 3000);
    });

    window.addEventListener('scroll', function() {
      const nav = document.querySelector('.main-nav');
      if (window.pageYOffset > 50) {
        nav.style.background = 'rgba(10,10,10,0.95)';
        nav.style.boxShadow = '0 2px 20px rgba(0,0,0,0.5)';
      } else {
        nav.style.background = 'rgba(10,10,10,0.9)';
        nav.style.boxShadow = 'none';
      }
    });

    // ============================================
    // LOCAL STORAGE DATABASE
    // ============================================
    function getRegistrations() {
      const data = localStorage.getItem(DB_KEY);
      return data ? JSON.parse(data) : [];
    }
    function saveRegistrations(data) {
      localStorage.setItem(DB_KEY, JSON.stringify(data));
    }
    function addRegistration(entry) {
      const data = getRegistrations();
      entry.id = Date.now();
      data.push(entry);
      saveRegistrations(data);
    }
    function deleteRegistration(id) {
      if (!confirm('Delete this entry?')) return;
      let data = getRegistrations();
      data = data.filter(function(item) { return item.id !== id; });
      saveRegistrations(data);
      renderAdminTable();
    }
    function clearAllData() {
      if (!confirm('‚ö†Ô∏è DELETE ALL registrations? This cannot be undone!')) return;
      if (!confirm('FINAL WARNING: Permanently delete all data?')) return;
      localStorage.removeItem(DB_KEY);
      renderAdminTable();
    }
    function escapeHTML(str) {
      if (!str) return '';
      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
    }

    // ============================================
    // PASSWORD / AUTH SYSTEM
    // ============================================
    function getAttempts() { return parseInt(localStorage.getItem(ATTEMPTS_KEY) || '0'); }
    function setAttempts(n) { localStorage.setItem(ATTEMPTS_KEY, n.toString()); }
    function getLockoutEnd() { return parseInt(localStorage.getItem(LOCKOUT_KEY) || '0'); }
    function setLockout() {
      const end = Date.now() + (ADMIN_CONFIG.lockoutTime * 1000);
      localStorage.setItem(LOCKOUT_KEY, end.toString());
    }
    function isLockedOut() {
      const end = getLockoutEnd();
      if (end === 0) return false;
      if (Date.now() < end) return true;
      localStorage.removeItem(LOCKOUT_KEY);
      setAttempts(0);
      return false;
    }

    function openPasswordModal() {
      const modal = document.getElementById('passwordModal');
      modal.classList.add('active');
      document.getElementById('adminPassword').value = '';
      document.getElementById('passwordError').textContent = '';
      if (isLockedOut()) {
        showLockout();
      } else {
        document.getElementById('loginForm').style.display = 'block';
        document.getElementById('lockoutView').style.display = 'none';
        updateAttemptsText();
        setTimeout(function() { document.getElementById('adminPassword').focus(); }, 300);
      }
    }

    function closePasswordModal() {
      document.getElementById('passwordModal').classList.remove('active');
      document.getElementById('adminPassword').value = '';
      document.getElementById('passwordError').textContent = '';
    }

    function togglePasswordVisibility() {
      const input = document.getElementById('adminPassword');
      const btn = document.getElementById('toggleBtn');
      if (input.type === 'password') { input.type = 'text'; btn.textContent = 'üôà'; }
      else { input.type = 'password'; btn.textContent = 'üëÅÔ∏è'; }
    }

    function updateAttemptsText() {
      const attempts = getAttempts();
      const remaining = ADMIN_CONFIG.maxAttempts - attempts;
      const el = document.getElementById('attemptsText');
      if (attempts > 0) {
        el.textContent = remaining + ' ATTEMPTS REMAINING';
        el.style.color = remaining <= 2 ? '#cc6666' : 'var(--light-gray)';
      } else { el.textContent = ''; }
    }

    function showLockout() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('lockoutView').style.display = 'block';
      const timerEl = document.getElementById('lockoutTimer');
      const lockInterval = setInterval(function() {
        const end = getLockoutEnd();
        const remaining = Math.max(0, Math.ceil((end - Date.now()) / 1000));
        timerEl.textContent = remaining;
        if (remaining <= 0) {
          clearInterval(lockInterval);
          localStorage.removeItem(LOCKOUT_KEY);
          setAttempts(0);
          document.getElementById('loginForm').style.display = 'block';
          document.getElementById('lockoutView').style.display = 'none';
          updateAttemptsText();
        }
      }, 1000);
    }

    function verifyPassword() {
      if (isLockedOut()) { showLockout(); return; }
      const input = document.getElementById('adminPassword').value;
      const errorEl = document.getElementById('passwordError');
      if (!input) { errorEl.textContent = 'Please enter the password'; return; }
      if (input === ADMIN_CONFIG.password) {
        setAttempts(0);
        localStorage.removeItem(LOCKOUT_KEY);
        closePasswordModal();
        openAdminPanel();
      } else {
        let attempts = getAttempts() + 1;
        setAttempts(attempts);
        if (attempts >= ADMIN_CONFIG.maxAttempts) {
          setLockout();
          showLockout();
        } else {
          errorEl.textContent = '‚ùå Wrong password!';
          errorEl.style.animation = 'none';
          setTimeout(function() { errorEl.style.animation = 'shake 0.5s ease'; }, 10);
          document.getElementById('adminPassword').value = '';
          document.getElementById('adminPassword').focus();
          updateAttemptsText();
        }
      }
    }

    // ============================================
    // ADMIN PANEL
    // ============================================
    function openAdminPanel() {
      document.getElementById('adminPanel').classList.add('active');
      document.getElementById('adminTrigger').style.display = 'none';
      document.body.style.overflow = 'hidden';
      renderAdminTable();
      startSessionTimer();
    }

    function logoutAdmin() {
      document.getElementById('adminPanel').classList.remove('active');
      document.getElementById('adminTrigger').style.display = 'flex';
      document.body.style.overflow = 'auto';
      stopSessionTimer();
    }

    function startSessionTimer() {
      sessionRemaining = ADMIN_CONFIG.sessionTimeout * 60;
      const timerEl = document.getElementById('sessionTimer');
      stopSessionTimer();
      sessionInterval = setInterval(function() {
        sessionRemaining--;
        const min = Math.floor(sessionRemaining / 60);
        const sec = sessionRemaining % 60;
        timerEl.textContent = 'SESSION: ' + min + ':' + (sec < 10 ? '0' : '') + sec;
        timerEl.classList.remove('warning', 'critical');
        if (sessionRemaining <= 60) timerEl.classList.add('critical');
        else if (sessionRemaining <= 180) timerEl.classList.add('warning');
        if (sessionRemaining <= 0) {
          logoutAdmin();
          alert('‚è∞ Session expired. Please login again.');
        }
      }, 1000);
    }

    function stopSessionTimer() {
      if (sessionInterval) { clearInterval(sessionInterval); sessionInterval = null; }
    }

    function renderAdminTable() {
      const data = getRegistrations();
      const tbody = document.getElementById('adminTableBody');
      const searchTerm = (document.getElementById('searchInput') ? document.getElementById('searchInput').value : '').toLowerCase();

      const filtered = searchTerm ? data.filter(function(e) {
        return (e.name && e.name.toLowerCase().includes(searchTerm)) ||
          (e.whatsapp && e.whatsapp.toLowerCase().includes(searchTerm)) ||
          (e.email && e.email.toLowerCase().includes(searchTerm)) ||
          (e.interests && e.interests.toLowerCase().includes(searchTerm)) ||
          (e.accommodation && e.accommodation.toLowerCase().includes(searchTerm));
      }) : data;

      const today = new Date().toLocaleDateString();
      let dayCount = 0, hostelCount = 0, todayCount = 0;
      data.forEach(function(e) {
        if (e.accommodation === 'Day Scholar') dayCount++;
        if (e.accommodation === 'Hosteler') hostelCount++;
        if (e.timestamp && e.timestamp.includes(today)) todayCount++;
      });
      document.getElementById('statTotal').textContent = data.length;
      document.getElementById('statDay').textContent = dayCount;
      document.getElementById('statHostel').textContent = hostelCount;
      document.getElementById('statToday').textContent = todayCount;

      if (filtered.length === 0) {
        tbody.innerHTML = '<tr><td colspan="8" class="no-data">' + (searchTerm ? 'No matches found' : 'No registrations yet') + '</td></tr>';
        return;
      }

      let html = '';
      filtered.forEach(function(entry, index) {
        html += '<tr>';
        html += '<td>' + (index + 1) + '</td>';
        html += '<td>' + escapeHTML(entry.name) + '</td>';
        html += '<td>' + escapeHTML(entry.whatsapp) + '</td>';
        html += '<td>' + escapeHTML(entry.email) + '</td>';
        html += '<td>' + escapeHTML(entry.interests) + '</td>';
        html += '<td>' + escapeHTML(entry.accommodation) + '</td>';
        html += '<td>' + escapeHTML(entry.timestamp) + '</td>';
        html += '<td><button class="delete-row-btn" onclick="deleteRegistration(' + entry.id + ')" title="Delete">üóëÔ∏è</button></td>';
        html += '</tr>';
      });
      tbody.innerHTML = html;
    }

    // ============================================
    // DOWNLOAD
    // ============================================
    function downloadCSV() {
      const data = getRegistrations();
      if (data.length === 0) { alert('No data!'); return; }
      let csv = 'S.No,Name,WhatsApp,Email,Interests,Accommodation,Timestamp\n';
      data.forEach(function(e, i) {
        csv += (i + 1) + ',"' + (e.name || '') + '","' + (e.whatsapp || '') + '","' + (e.email || '') + '","' + (e.interests || '') + '","' + (e.accommodation || '') + '","' + (e.timestamp || '') + '"\n';
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'KARUPPU_ADIMAI_' + new Date().toISOString().slice(0, 10) + '.csv';
      a.click(); URL.revokeObjectURL(url);
    }

    function downloadJSON() {
      const data = getRegistrations();
      if (data.length === 0) { alert('No data!'); return; }
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'KARUPPU_ADIMAI_' + new Date().toISOString().slice(0, 10) + '.json';
      a.click(); URL.revokeObjectURL(url);
    }

    // ============================================
    // FORM LOGIC
    // ============================================
    function handleInterestChange() {
      const noneCheckbox = document.getElementById('noneCheckbox');
      const others = document.querySelectorAll('input[name="interests"]:not(#noneCheckbox)');
      if (Array.from(others).some(function(cb) { return cb.checked; })) {
        noneCheckbox.checked = false;
        document.getElementById('customInterestBox').style.display = 'none';
      }
    }

    function handleNoneChange() {
      const noneCheckbox = document.getElementById('noneCheckbox');
      const others = document.querySelectorAll('input[name="interests"]:not(#noneCheckbox)');
      const customBox = document.getElementById('customInterestBox');
      if (noneCheckbox.checked) {
        others.forEach(function(cb) { cb.checked = false; });
        customBox.style.display = 'block'; customBox.classList.add('slide-in');
      } else {
        customBox.style.display = 'none'; customBox.classList.remove('slide-in');
      }
    }

    function submitForm(event) {
      event.preventDefault();
      const name = document.getElementById('name').value.trim();
      const whatsapp = document.getElementById('whatsapp').value.trim();
      const email = document.getElementById('email').value.trim();
      const interestCbs = document.querySelectorAll('input[name="interests"]:checked');
      const accommodation = document.querySelector('input[name="accommodation"]:checked');
      const customInterest = document.getElementById('customInterest').value.trim();
      const noneChecked = document.getElementById('noneCheckbox').checked;

      if (!name) { alert('Please enter your name.'); return; }
      if (!whatsapp) { alert('Please enter your WhatsApp number.'); return; }
      if (!email) { alert('Please enter your email address.'); return; }
      if (interestCbs.length === 0) { alert('Please select at least one interest.'); return; }
      if (noneChecked && !customInterest) { alert('Please describe your interests.'); return; }
      if (!accommodation) { alert('Please select Day Scholar or Hosteler.'); return; }

      let interests = Array.from(interestCbs).map(function(cb) { return cb.value; }).join(', ');
      if (noneChecked && customInterest) interests = 'Other: ' + customInterest;

      document.getElementById('submitBtn').querySelector('.btn-text').style.display = 'none';
      document.getElementById('submitBtn').querySelector('.btn-icon').style.display = 'none';
      document.getElementById('btnLoading').style.display = 'flex';
      document.getElementById('submitBtn').disabled = true;

      setTimeout(function() {
        addRegistration({
          name: name,
          whatsapp: whatsapp,
          email: email,
          interests: interests,
          accommodation: accommodation.value,
          timestamp: new Date().toLocaleString()
        });

        document.getElementById('registrationForm').style.display = 'none';
        document.getElementById('successMessage').style.display = 'block';
        document.getElementById('submitBtn').querySelector('.btn-text').style.display = 'inline';
        document.getElementById('submitBtn').querySelector('.btn-icon').style.display = 'inline';
        document.getElementById('btnLoading').style.display = 'none';
        document.getElementById('submitBtn').disabled = false;
      }, 800);
    }

    function resetForm() {
      document.getElementById('registrationForm').reset();
      document.getElementById('registrationForm').style.display = 'block';
      document.getElementById('successMessage').style.display = 'none';
      document.getElementById('customInterestBox').style.display = 'none';
    }

    function hideError() {
      document.getElementById('errorMessage').style.display = 'none';
    }

    // ============================================
    // CLOSE MODAL ON OUTSIDE CLICK
    // ============================================
    document.getElementById('passwordModal').addEventListener('click', function(e) {
      if (e.target === this) closePasswordModal();
    });

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        if (document.getElementById('adminPanel').classList.contains('active')) logoutAdmin();
        else if (document.getElementById('passwordModal').classList.contains('active')) closePasswordModal();
      }
    });
  </script>
</body>
</html>
